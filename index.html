<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>2048 Básico</title>
  <style>
    body { font-family: Arial; text-align: center; background: #faf8ef; padding: 20px; }
    #game { display: grid; grid-template-columns: repeat(4, 60px); grid-gap: 10px; width: 260px; margin: auto; background: #bbada0; padding: 10px; border-radius: 6px; }
    .tile { width: 60px; height: 60px; line-height: 60px; background: #cdc1b4; font-weight: bold; font-size: 24px; border-radius: 3px; }
    .tile-2 { background: #eee4da; }
    .tile-4 { background: #ede0c8; }
    .tile-8 { background: #f2b179; color: #fff; }
    .tile-16 { background: #f59563; color: #fff; }
    .tile-32 { background: #f67c5f; color: #fff; }
    .tile-64 { background: #f65e3b; color: #fff; }
    .tile-128 { background: #edcf72; color: #fff; font-size: 18px; }
    .tile-256 { background: #edcc61; color: #fff; font-size: 18px; }
    .tile-512 { background: #edc850; color: #fff; font-size: 18px; }
    .tile-1024 { background: #edc53f; color: #fff; font-size: 14px; }
    .tile-2048 { background: #edc22e; color: #fff; font-size: 14px; }
  </style>
</head>
<body>
  <h1>Juego 2048 Básico creada por Marco</h1>
  <div id="game"></div>
  <p>Usa las flechas del teclado para jugar. Saludos.</p>
  <script>
    const size = 4;
    let board = [];

    function startGame() {
      board = Array(size * size).fill(0);
      addTile(); addTile();
      drawBoard();
    }

    function drawBoard() {
      const game = document.getElementById("game");
      game.innerHTML = "";
      board.forEach(v => {
        const tile = document.createElement("div");
        tile.className = "tile" + (v ? " tile-" + v : "");
        tile.textContent = v ? v : "";
        game.appendChild(tile);
      });
    }

    function addTile() {
      let empty = board.map((v, i) => v === 0 ? i : -1).filter(i => i !== -1);
      if (empty.length === 0) return;
      let index = empty[Math.floor(Math.random() * empty.length)];
      board[index] = Math.random() < 0.9 ? 2 : 4;
    }

    function slide(row) {
      let arr = row.filter(v => v);
      for (let i = 0; i < arr.length - 1; i++) {
        if (arr[i] === arr[i + 1]) {
          arr[i] *= 2; arr[i + 1] = 0;
        }
      }
      arr = arr.filter(v => v);
      while (arr.length < size) arr.push(0);
      return arr;
    }

    function move(dir) {
      let moved = false;
      let copy = board.slice();
      for (let r = 0; r < size; r++) {
        let row = [];
        for (let c = 0; c < size; c++) {
          let i = dir === "left" || dir === "right" ? r * size + c : c * size + r;
          row.push(board[i]);
        }
        if (dir === "right" || dir === "down") row.reverse();
        let newRow = slide(row);
        if (dir === "right" || dir === "down") newRow.reverse();
        for (let c = 0; c < size; c++) {
          let i = dir === "left" || dir === "right" ? r * size + c : c * size + r;
          board[i] = newRow[c];
        }
      }
      if (JSON.stringify(copy) !== JSON.stringify(board)) {
        addTile();
        drawBoard();
      }
    }

    document.addEventListener("keydown", e => {
      switch (e.key) {
        case "ArrowLeft": move("left"); break;
        case "ArrowRight": move("right"); break;
        case "ArrowUp": move("up"); break;
        case "ArrowDown": move("down"); break;
      }
    });

    startGame();
  </script>
</body>
</html>
