<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113.65">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="es"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1">&lt;meta charset="UTF-8" /&gt;</p>
<p class="p1">&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;</p>
<p class="p1">&lt;title&gt;2048 Básico&lt;/title&gt;</p>
<p class="p1">&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>body { font-family: Arial, sans-serif; text-align: center; margin: 30px; background: #faf8ef; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>h1 { margin-bottom: 20px; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>#game { width: 260px; margin: 0 auto; background: #bbada0; padding: 10px; border-radius: 6px; display: grid; grid-template-columns: repeat(4, 60px); grid-gap: 10px;}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile {</p>
<p class="p1"><span class="Apple-converted-space">    </span>width: 60px; height: 60px; background: #cdc1b4; border-radius: 3px; font-size: 25px; line-height: 60px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>font-weight: bold; color: #776e65;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-2 { background: #eee4da; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-4 { background: #ede0c8; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-8 { background: #f2b179; color: white; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-16 { background: #f59563; color: white; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-32 { background: #f67c5f; color: white; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-64 { background: #f65e3b; color: white; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-128 { background: #edcf72; color: white; font-size: 20px; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-256 { background: #edcc61; color: white; font-size: 20px; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-512 { background: #edc850; color: white; font-size: 20px; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-1024 { background: #edc53f; color: white; font-size: 15px; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>.tile-2048 { background: #edc22e; color: white; font-size: 15px; }</p>
<p class="p1">&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1">&lt;h1&gt;2048 Básico&lt;/h1&gt;</p>
<p class="p1">&lt;div id="game"&gt;&lt;/div&gt;</p>
<p class="p1">&lt;p&gt;Usa las flechas del teclado para mover las fichas.&lt;/p&gt;</p>
<p class="p1">&lt;button onclick="startGame()"&gt;Reiniciar Juego&lt;/button&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>const size = 4;</p>
<p class="p1"><span class="Apple-converted-space">  </span>let board = [];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function startGame() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>board = [];</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (let i = 0; i &lt; size * size; i++) board.push(0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>addTile();</p>
<p class="p1"><span class="Apple-converted-space">    </span>addTile();</p>
<p class="p1"><span class="Apple-converted-space">    </span>drawBoard();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function drawBoard() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const game = document.getElementById('game');</p>
<p class="p1"><span class="Apple-converted-space">    </span>game.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">    </span>board.forEach(value =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const tile = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">      </span>tile.className = 'tile' + (value ? ' tile-' + value : '');</p>
<p class="p1"><span class="Apple-converted-space">      </span>tile.textContent = value || '';</p>
<p class="p1"><span class="Apple-converted-space">      </span>game.appendChild(tile);</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function addTile() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>let emptyIndices = board.map((v, i) =&gt; v === 0 ? i : -1).filter(i =&gt; i !== -1);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (emptyIndices.length === 0) return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let index = emptyIndices[Math.floor(Math.random() * emptyIndices.length)];</p>
<p class="p1"><span class="Apple-converted-space">    </span>board[index] = Math.random() &lt; 0.9 ? 2 : 4;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function slide(row) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>let arr = row.filter(v =&gt; v !== 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (let i = 0; i &lt; arr.length - 1; i++) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (arr[i] === arr[i + 1]) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>arr[i] *= 2;</p>
<p class="p1"><span class="Apple-converted-space">        </span>arr[i + 1] = 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>arr = arr.filter(v =&gt; v !== 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>while (arr.length &lt; size) arr.push(0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>return arr;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function moveLeft() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (let r = 0; r &lt; size; r++) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>let row = board.slice(r * size, r * size + size);</p>
<p class="p1"><span class="Apple-converted-space">      </span>let newRow = slide(row);</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let c = 0; c &lt; size; c++) board[r * size + c] = newRow[c];</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function moveRight() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (let r = 0; r &lt; size; r++) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>let row = board.slice(r * size, r * size + size).reverse();</p>
<p class="p1"><span class="Apple-converted-space">      </span>let newRow = slide(row);</p>
<p class="p1"><span class="Apple-converted-space">      </span>newRow.reverse();</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let c = 0; c &lt; size; c++) board[r * size + c] = newRow[c];</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function moveUp() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (let c = 0; c &lt; size; c++) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>let col = [];</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let r = 0; r &lt; size; r++) col.push(board[r * size + c]);</p>
<p class="p1"><span class="Apple-converted-space">      </span>let newCol = slide(col);</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let r = 0; r &lt; size; r++) board[r * size + c] = newCol[r];</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function moveDown() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (let c = 0; c &lt; size; c++) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>let col = [];</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let r = 0; r &lt; size; r++) col.push(board[r * size + c]);</p>
<p class="p1"><span class="Apple-converted-space">      </span>let newCol = slide(col.reverse());</p>
<p class="p1"><span class="Apple-converted-space">      </span>newCol.reverse();</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let r = 0; r &lt; size; r++) board[r * size + c] = newCol[r];</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function canMove() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (let i = 0; i &lt; board.length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (board[i] === 0) return true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>let r = Math.floor(i / size);</p>
<p class="p1"><span class="Apple-converted-space">      </span>let c = i % size;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (c &lt; size - 1 &amp;&amp; board[i] === board[i + 1]) return true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (r &lt; size - 1 &amp;&amp; board[i] === board[i + size]) return true;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>return false;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>document.addEventListener('keydown', e =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>let oldBoard = board.slice();</p>
<p class="p1"><span class="Apple-converted-space">    </span>switch (e.key) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'ArrowLeft': moveLeft(); break;</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'ArrowRight': moveRight(); break;</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'ArrowUp': moveUp(); break;</p>
<p class="p1"><span class="Apple-converted-space">      </span>case 'ArrowDown': moveDown(); break;</p>
<p class="p1"><span class="Apple-converted-space">      </span>default: return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (JSON.stringify(oldBoard) !== JSON.stringify(board)) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>addTile();</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawBoard();</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!canMove()) alert('¡Juego terminado!');</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>startGame();</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
